**你会如何存储用户密码这么重要的数据吗？仅仅 MD5 加密一下存储就够了吗？**

可以通过哈希算法，对用户密码进行加密之后再存储，不过最好选择相对安全的加密算法，比如 SHA 等（因为 MD5 已经号称被破解了）。

字典攻击你听说过吗？如果用户信息被“脱库”，黑客虽然拿到是加密之后的密文，但可以通过“猜”的方式来破解密码，这是因为，有些用户的密码太简单

针对字典攻击，我们可以引入一个盐（salt），跟用户的密码组合在一起，增加密码的复杂度。我们拿组合之后的字符串来做哈希算法加密，将它存储到数据库中，进一步增加破解的难度

**什么是哈希算法？**

将任意长度的二进制值串映射为固定长度的二进制值串，这个映射的规则就是**哈希算法**，而通过原始数据映射之后得到的二进制值串就是**哈希值**

- 从哈希值不能反向推导出原始数据（所以哈希算法也叫单向哈希算法）
- 对输入数据非常敏感，哪怕原始数据只修改了一个 Bit，最后得到的哈希值也大不相同
- 散列冲突的概率要很小，对于不同的原始数据，哈希值相同的概率非常小
- 哈希算法的执行效率要尽量高效，针对较长的文本，也能快速地计算出哈希值

**哈希算法应用场景**

哈希算法应用最常见的场景有安全加密、唯一标识、数据校验、散列函数、负载均衡、数据分片、分布式存储

1. 安全加密

   常用于加密的哈希算法有**MD5**（MD5 Message-Digest Algorithm，MD5 消息摘要算法）、**SHA**（Secure Hash Algorithm，安全散列算法）、**DES**（Data Encryption Standard，数据加密标准）、**AES**（Advanced Encryption Standard，高级加密标准）

   对于用于加密的哈希算法来说，前面两点更加重要，即很难根据哈希值反向推导出原始数据、散列冲突的概率要很小

   任何哈希算法都会出现散列冲突，但是这个冲突概率非常小。越是复杂哈希算法越难破解，但同样计算时间也就越长

   选择哈希算法的时候，要权衡安全性和计算时间来决定用哪种哈希算法

2. 唯一标识

   哈希算法可以对大数据做信息摘要，通过一个较短的二进制编码来表示很大的数据

3. 数据校验

   用于校验数据的完整性和正确性

4. 散列函数

   散列函数中用到的散列算法，更加关注散列后的值是否能平均分布

   它对哈希算法的要求非常特别，更加看重的是散列的平均性和哈希算法的执行效率

5. 负载均衡

   负载均衡算法有很多，比如轮询、随机、加权轮询等。那如何才能实现一个会话粘滞（session sticky）的负载均衡算法呢？也就是说，我们需要在同一个客户端上，在一次会话中的所有请求都路由到同一个服务器上

   **我们可以通过哈希算法，对客户端 IP 地址或者会话 ID 计算哈希值，将取得的哈希值与服务器列表的大小进行取模运算，最终得到的值就是应该被路由到的服务器编号。**

6. 数据分片

   我们可以先对数据进行分片，然后采用多台机器处理的方法，来提高处理速度

7. 分布式存储

   采用数据分片的思想来做，当需要扩容时，会面临所有的数据都要重新计算哈希值的情况，相当于缓存中的数据全部消失，容易发生缓存穿透，产生雪崩效应。

   这里就可以采用**一致性哈希算法**