问题：**Redis 为什么会选择用跳表来实现有序集合呢？** 为什么不用红黑树呢？

按照区间来查找数据这个操作，红黑树的效率没有跳表高

**如何理解“跳表”？**

链表+多级索引的结构，就是跳表

**用跳表查询到底有多快？**

第 k 级索引的结点个数是第 k-1 级索引的结点个数的 1/2，第 k索引结点的个数就是 n/(2k)。假设索引有 h 级，最高级的索引有 2 个结点。通过上面的公式，我们可以得到 n/(2h)=2，从而求得 h=log2n-1。如果包含原始链表这一层，整个跳表的高度就是 log2n。我们在跳表中查询某个数据的时候，如果每一层都要遍历 m 个结点，那在跳表中查询一个数据的时间复杂度就是 O(m*logn)。

假设我们要查找的数据是 x，在第 k 级索引中，我们遍历到 y 结点之后，发现 x 大于 y，小于后面的结点 z，所以我们通过 y 的 down 指针，从第 k 级索引下降到第 k-1 级索引。在第 k-1 级索引中，y 和 z 之间只有 3 个结点（包含 y 和 z），所以，我们在 K-1 级索引中最多只需要遍历 3 个结点，**每一级索引都最多只需要遍历 3 个结点**。

**跳表是不是很浪费内存？**

空间复杂度还是 O(n)

**高效的动态插入和删除**

动态的插入、删除操作的时间复杂度也是 O(logn)

**跳表索引动态更新**

跳表是通过随机函数